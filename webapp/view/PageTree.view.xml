<mvc:View
	controllerName="cmjs.controller.PageTree"
	displayBlock="true"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:dnd="sap.ui.core.dnd">

	<VBox>
		<items>
			<OverflowToolbar>
				<ToolbarSpacer/>
				<Button icon="sap-icon://add-document" press=".onNewpagePressed"/>
				<Button icon="sap-icon://delete" press=".onDeletePressed" enabled="{= ${tree>/selectedId} !== null }"/>
			</OverflowToolbar>
			<Tree
				id="PageTree"
				busy="{view>/busy}"
				mode="SingleSelectMaster"				
				items="{path: 'tree>/nodes'}" 
				selectionChange=".onSelectionChange" 
				toggleOpenState=".onToggleOpenState">
				<dragDropConfig>
					<dnd:DragDropInfo
						sourceAggregation="items"
						targetAggregation="items"
						dropPosition="OnOrBetween"
						drop=".onDrop"/>
				</dragDropConfig>
				<items>
					<StandardTreeItem 
						title="{tree>title}" 
						selected="{= ${tree>_id} === ${view>/selectedId} }" />
				</items>
			</Tree>
		</items>
	</VBox>
</mvc:View>