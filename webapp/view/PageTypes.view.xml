<mvc:View
	controllerName="cmjs.controller.PageTypes"
	displayBlock="true"
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:t="sap.ui.table"
    xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc">

    <l:Splitter
        id="mainSplitter"
        height="100%"
        width="100%">
        <ScrollContainer>
            <layoutData>
                <l:SplitterLayoutData size="300px" />
            </layoutData>
            <content>
                <List 
                    items="{view>/pageTypes}"
                    mode="None">
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="{i18n>pageTypes}"/>
                            <ToolbarSpacer/>
                            <Button icon="sap-icon://add-document" press=".onNewpagePressed"/>
                        </OverflowToolbar>
                    </headerToolbar>
                    <items>
                        <CustomListItem
                            type="Navigation"
                            press=".onListItemPress">
                            <Text text="{view>_id}" class="sapUiTinyMargin"/>
                        </CustomListItem>
                    </items>
                </List>
            </content>
        </ScrollContainer>
        <ScrollContainer visible="{view>/showPageType}" id="page">
            <layoutData>
                <l:SplitterLayoutData size="auto" />
            </layoutData>            
            <content>
                <f:SimpleForm
                    layout="ResponsiveGridLayout"
                    columnsL="1"
                    columnsM="1"
                    columnsXL="1"
                    editable="true"
                    emptySpanXL="6"
                    emptySpanL="4"
                    emptySpanM="0"
                    emptySpanS="0"
                    labelSpanXL="1"
                    labelSpanL="2"
                    labelSpanM="2"
                    labelSpanS="12">
                    <f:toolbar>
                        <OverflowToolbar>
                            <Title text="{view>_id}"/>
                            <ToolbarSpacer/>
							<Button icon="sap-icon://edit" text="{i18n>edit}" type="Emphasized" visible="{= ! ${view>/editable} }" press=".onEditPress"/>
							<Button icon="sap-icon://delete" text="{i18n>delete}" type="Reject" visible="{= ! ${view>/editable} }" press=".onDeletePress" enabled="false"/>
							<Button icon="sap-icon://accept" text="{i18n>save}" type="Accept" visible="{view>/editable}" press=".onSavePress"/>
							<Button icon="sap-icon://decline" text="{i18n>cancel}" type="Reject" visible="{view>/editable}" press=".onCancelPress"/>
                        </OverflowToolbar>
                    </f:toolbar>
                    <f:content>
                        <Label text="{i18n>pageType}"/>
                        <Input value="{view>_id}" editable="false"/>
                    </f:content>
                </f:SimpleForm>
                <t:Table 
                    visibleRowCountMode="Auto"
                    selectionMode="None"
                    rows="{view>fields}">
                    <t:columns>
                        <t:Column width="20em">
                            <Label text="Feld"/>
                            <t:template>
                                <Input value="{view>id}" editable="{view>/editable}"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="20em">
                            <Label text="Label"/>
                            <t:template>
                                <Input value="{view>label}" editable="{view>/editable}"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="8em">
                            <Label text="Typ"/>
                            <t:template>
                                <Select selectedKey="{view>fieldType}" items="{view>/fieldTypes}" editable="{view>/editable}">
                                    <core:Item key="{view>key}" text="{view>name}" />
                                </Select>
                            </t:template>
                        </t:Column>
                        <t:Column>
                            <t:template>
                                <Button icon="sap-icon://delete" type="Transparent" press=".onFieldDelete"  enabled="{view>/editable}"/>
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:Table>
            </content>
        </ScrollContainer>
    </l:Splitter>

</mvc:View>